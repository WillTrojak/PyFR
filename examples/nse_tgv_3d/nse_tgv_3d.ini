[backend]
precision = single
rank-allocator = linear

[backend-cuda]
device-id = local-rank
gimmik-max-nnz = 512
mpi-type = standard
block-1d = 64
block-2d = 128, 2

[constants]
gamma = 1.4
mu = 6.25e-4
Pr = 0.71
Ps = 111.607 

[solver]
system = navier-stokes
order = 4
anti-alias = none
viscosity-correction = none
shock-capturing = none

[solver-time-integrator]
scheme = rk4
controller = none
tstart = 0
tend = 20.0
dt = 2e-4

[solver-interfaces]
riemann-solver = exact
ldg-beta = 0.0
ldg-tau = 0.0

[solver-interfaces-quad]
flux-pts = gauss-legendre
quad-deg = 6
quad-pts = gauss-legendre


[solver-elements-hex]
soln-pts = gauss-legendre
quad-deg = 6
quad-pts = gauss-legendre


[soln-plugin-nancheck]
nsteps = 10

[soln-plugin-integrate]
nsteps = 50
file = integral.csv
header = true

int-E = rho*(u*u + v*v + w*w)

[soln-plugin-writer] 
dt-out = 1.0
basedir = .
basename = nse_tgv_3d_p4-{t:.2f}

[soln-ics]
rho = 1
u = sin(x)*cos(y)*cos(z)
v = -cos(x)*sin(y)*cos(z)
w = 0
p = Ps + (1.0/16.0)*(cos(2*x) + cos(2*y))*(cos(2*z + 2))



